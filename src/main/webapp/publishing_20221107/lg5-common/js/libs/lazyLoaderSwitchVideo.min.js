!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(s){"use strict";window.LazyLoaderSwitchVideo;return vcui.ui("lazyLoaderSwitchVideo",{bindjQuery:"lazyLoaderSwitchVideo",defaults:{range:1e3,selector:"",mode:"vertical",container:"window",pc_prefix:"pc",mobile_prefix:"m",useFade:!1},initialize:function(t,e){var r=this;!1!==r.supr(t,e)&&(r.mode="",r.scrollTimer=null,r.isVert="vertical"===r.options.mode,r.largestPosition=0,r.$items=s(r.options.selector+":not(.ignore-lazyload)video[data-pc-src][data-m-src]"),r.$videoSwitch=s(r.options.selector+"video[data-pc-src][data-m-src]").filter(".ignore-lazyload"),r.$videoSwitch.each(function(t,e){r._loadVideo(s(e),null)}),r.$con="scroll"===r.$el.css("overflow")?r.$el:s(window),r._bindEvents())},_bindEvents:function(){var r=this;r.$con.on("scroll"+r.eventNS,function(){r.scrollTimer&&clearTimeout(r.scrollTimer),r.scrollTimer=setTimeout(function(){r._action()},10)}).trigger("scroll"+r.eventNS),s(window).on("breakpointchange",function(t){var e=window.breakpoint;"mobile"!=e.name&&"pc"!=e.name||r._resize()})},_getContainerSize:function(){return this.$con[this.isVert?"height":"width"]()},_getScrollValue:function(){return this.$con[this.isVert?"scrollTop":"scrollLeft"]()},_action:function(){var r=this,o=r._getScrollValue();o>=r.largestPosition&&(r.$items=r.$items.filter(function(){var t=s(this),e=t.offset()[r.isVert?"top":"left"];return!(o+r.options.range+r._getContainerSize()>=e)||(r.options.useFade&&t.css("opacity",0),r._loadVideo(t,null),!1)}),r.largestPosition=o),r.triggerHandler("lazyLoaderscroll"),r.$items.length||(r.triggerHandler("lazyLoadercomplete"),r.$con.off(r.eventNS))},reload:function(t){var r=this;t.find("video[data-pc-src][data-m-src]").each(function(t,e){r._loadVideo(s(e),null)})},_resize:function(){var t=this,c=767<window.innerWidth?t.options.pc_prefix:t.options.mobile_prefix;t.mode!=c&&(t.mode=c,s(t.options.selector+"video[data-pc-src][data-m-src][data-current-video]").each(function(t,e){var r=s(e),o=r.attr("data-"+c+"-src"),i=r.attr("data-current-video"),n=r.attr("data-"+c+"-poster"),a=r.attr("data-current-poster");n&&n!=a&&(r.attr("poster",n),r.attr("data-current-poster",n)),o&&o!=i&&(r.attr("src",o),r.attr("data-current-video",o))}))},_loadVideo:function(t){var e=767<window.innerWidth?this.options.pc_prefix:this.options.mobile_prefix,r=t.attr("data-"+e+"-src"),o=t.attr("data-current-video"),i=t.attr("data-"+e+"-poster"),n=t.attr("data-current-poster");i&&i!=n&&(t.attr("poster",i),t.attr("data-current-poster",i)),r&&r!=o&&(t.attr("src",r),t.attr("data-current-video",r))}})});
//# sourceMappingURL=maps/lazyLoaderSwitchVideo.min.js.map
