{"version":3,"sources":["KRP0005.js"],"names":["KRP0005","init","self","this","listData","setting","bindEvents","lgkorUI","getCookie","RECENT_PROD_COOKIE_NAME","requestData","$KRP0005","find","hide","$floatingWrap","$","moreButton","$popup","$list","on","e","preventDefault","hasClass","closePopup","removeClass","attr","text","addClass","$div","parents","window","open","openPopup","href","replace","length","location","resetImage","show","ignoreOverflowForce","vcui","detect","isMobile","css","overflow","each","idx","obj","src","dataset","tempSrc","ajaxUrl","requestAjaxDataPost","result","data","arr","Array","empty","forEach","item","index","price","obsSellingPrice","number","addComma","disabledReason","append","template","checkNoData","setStorage","document","ready","querySelector","after","floatingWrap","remove","btnFloatingWrap","domInsertCheck","one","hash","off","trigger","stop","animate","scrollTop"],"mappings":"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","file":"../KRP0005.min.js","sourcesContent":["(function() {\r\n\tvar KRP0005 = {\r\n\t\tinit: function(){\r\n            var self = this;\r\n            self.listData = null;\r\n            self.setting();\r\n            self.bindEvents();\r\n\r\n            var cookieValue = lgkorUI.getCookie(lgkorUI.RECENT_PROD_COOKIE_NAME);\r\n            if(cookieValue) {\r\n                self.requestData(false);\r\n            } else {\r\n                //최근본 제품이 없으면 최근본 제품 버튼을 숨긴다\r\n                self.$KRP0005.find('.floating-linker.recently').hide();\r\n            }\r\n\t\t},\r\n\r\n        setting: function() {\r\n            var self = this;\t\t\r\n            \r\n            self.$floatingWrap = $('.btn-floating-wrap');\r\n            self.$KRP0005 = $('.KRP0005.floating-menu');\r\n            self.moreButton = self.$KRP0005.find('.more-plus-linker a');\r\n\r\n            self.$popup = $('#KRP0032:eq(0)');\r\n            self.$list = self.$popup.find('div.lately-list ul');\r\n        },        \r\n        bindEvents: function() {\r\n            var self = this;\r\n\r\n            self.moreButton.on('click',function(e){\r\n                e.preventDefault();\r\n                var isOpen = self.$floatingWrap.hasClass('open');\r\n                if(isOpen) {\r\n                    if(self.$popup.hasClass('open')) {\r\n                        //만약 최근본 제품 팝업이 열려 있으면 닫는다/\r\n                        self.closePopup();\r\n                    }\r\n                    self.$floatingWrap.removeClass('open');\r\n                    //닫기\r\n                    self.moreButton.attr('aria-expanded',false);\r\n                    self.moreButton.find('span').text('서비스 메뉴 열기'); //BTOCSITE-5223 : 플로팅 버튼 GA 수정 2021-09-14\r\n                } else {\r\n                    self.$floatingWrap.addClass('open');\r\n                    //열기\r\n                    self.moreButton.attr('aria-expanded',true);\r\n                    self.moreButton.find('span').text('서비스 메뉴 닫기'); //BTOCSITE-5223 : 플로팅 버튼 GA 수정 2021-09-14\r\n                }\r\n            });\r\n\r\n            self.$KRP0005.on('click','div.floating-linker > a',function(e){\r\n              \r\n                e.preventDefault();\r\n                var $div = $(this).parents('div.floating-linker');\r\n\r\n                if ($div.hasClass('faq')){\r\n                    window.open('/support/usage-guide-faq','_blank');\r\n                    return;\r\n                }\r\n\r\n                if($div.hasClass('chat')) {\r\n                    //상담쳇\r\n                } else if($div.hasClass('recently')) {\r\n                    //최근본 제품\r\n                    if(!self.listData) {\r\n                        self.requestData(true);\r\n                    } else {\r\n                        self.openPopup();\r\n                    }\r\n                } else {\r\n                    //\r\n                    e.preventDefault();\r\n                    var href = $(this).attr('href');\r\n                    if(href && href.replace(\"#\", \"\").length > 0) {\r\n                        location.href = href;\r\n                    }\r\n                }\r\n            });\r\n\r\n            self.$popup.on('click','.ui_modal_close',function(e){\r\n                e.preventDefault();\r\n                self.closePopup();\r\n            });\r\n\r\n            // BTOCSITE-12128 메인 성능개선\r\n            $(window).on('floatingTopHide', function(e){\r\n                if(self.$floatingWrap.hasClass('scroll')) self.$floatingWrap.removeClass('scroll');\r\n            }); \r\n\r\n            $(window).on('floatingTopShow', function(e){\r\n                if(!self.$floatingWrap.hasClass('scroll')) self.$floatingWrap.addClass('scroll');\r\n            }); \r\n        },\r\n\r\n        //최근본 제품 처리\r\n\r\n        //리스트 열기\r\n        openPopup: function() {\r\n            var self = this;\r\n            self.resetImage();\r\n            self.$popup.show();\r\n            self.$popup.removeClass('close');\r\n            self.$popup.addClass('open');\r\n\r\n            self.ignoreOverflowForce = $('body').hasClass('ignore-overflow-hidden');\r\n            if(!self.ignoreOverflowForce && vcui.detect.isMobile){\r\n                $('html, body').css({\r\n                    overflow:\"hidden\"\r\n                });\r\n            } \r\n        },\r\n\r\n        //리스트 닫기\r\n        closePopup: function() {\r\n            var self = this;\r\n            self.$popup.addClass('close');\r\n            self.$popup.removeClass('open');\r\n            self.$popup.hide();\r\n\r\n            self.ignoreOverflowForce = $('body').hasClass('ignore-overflow-hidden');\r\n            if(!self.ignoreOverflowForce && vcui.detect.isMobile) {\r\n                \r\n                $('html, body').css({\r\n                    overflow:\"visible\"\r\n                });\r\n\r\n            } \r\n        },\r\n\r\n        resetImage: function() {\r\n            var self = this;\r\n            var $img = self.$popup.find('img[data-temp-src]');\r\n            $img.each(function(idx,obj){\r\n                if(!obj.src.length || obj.src.length == \"\") {\r\n                    obj.src = obj.dataset.tempSrc;\r\n                }\r\n            });\r\n        },\r\n\r\n        //최근본 제품 리스트 가져오기\r\n        requestData: function(openPopup) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar ajaxUrl = self.$popup.attr('data-list-url');\r\n\r\n            lgkorUI.requestAjaxDataPost(ajaxUrl, null, function(result) {\r\n\t\t\t\tvar data = result.data;\r\n\t\t\t\tvar arr = data instanceof Array ? data : [];\r\n                self.listData = arr;\r\n\t\t\t\tself.$list.empty();\r\n\r\n                var popuplistItemTemplate = '<li{{#if disabledReason}} class=\"disabled\"{{/if}}>' +\r\n                    '<div class=\"img\"><a href=\"{{modelUrlPath}}\"><img data-temp-src=\"{{smallImageAddr}}\" alt=\"{{imageAltText}}\"></a></div>' +\r\n                    '<dl><a href=\"{{modelUrlPath}}\"><dt>{{#raw modelDisplayName}}</dt><dd>{{#if disabledReason}}{{disabledReason}}{{#else}}{{#if price}}{{price}}원{{/if}}{{/if}}</dd></a></dl>' +\r\n                '</li>'\r\n\r\n\t\t\t\tarr.forEach(function(item, index) {\r\n                    var price = item.obsSellingPrice ? (item.obsSellingPrice > 0 ? item.obsSellingPrice : null) : null;\r\n                    item.price = price ? vcui.number.addComma(price) : null;\r\n                    item.disabledReason = item.disabledReason && item.disabledReason.length > 0 ? item.disabledReason : null;\r\n\t\t\t\t\tself.$list.append(vcui.template(popuplistItemTemplate, item));\r\n                });\r\n\r\n                self.checkNoData();\r\n                \r\n                if(openPopup) {\r\n                    self.openPopup();\r\n                }\r\n\t\t\t}, null, true);\r\n        },\r\n        \r\n        //최근본 제품 noData 체크\r\n        checkNoData: function() {\r\n            var self = this;\r\n            if(self.$list.find('li').length > 0) {\r\n                self.$KRP0005.find('.floating-linker.recently').show();\r\n            } else {\r\n                self.$KRP0005.find('.floating-linker.recently').hide();\r\n            }\r\n        }\r\n\r\n\t};\r\n\r\n    // BTOCSITE-2838 : 매니저 정보로 이동 s\r\n    var managerInfoLink= 'managerInfoLink';\r\n    $('.btn-manager-info').on('click', function(e){\r\n        e.preventDefault();\r\n        lgkorUI.setStorage(managerInfoLink, true);\r\n        location.href='/my-page/care-solution-contract-status';\r\n    });\r\n    // BTOCSITE-2838 :매니저 정보로 이동 e \r\n\r\n\r\n    $(document).ready(function(){\r\n        if(!document.querySelector('.KRP0005')) return false;\r\n\r\n        // BTOCSITE-27 :: 플로팅 바 swipe 대응        \r\n        var isSwipe = !!$('#sw_con').length;\r\n\r\n        if (isSwipe){\r\n            // 20210810 BTOCSITE-1814\r\n            if($('#floatBox').length == 0) $('#sw_con').after('<div id=\"floatBox\"></div>');\r\n\r\n            var floatingWrap = $('#sw_con .floating-wrap').remove();\r\n            var btnFloatingWrap = $('#sw_con .btn-floating-wrap').remove();\r\n\r\n            if($('#floatBox').find('.floating-wrap').length < 1) {\r\n                var domInsertCheck = false;\r\n                $('#sw_con .swiper-slide').one('DOMNodeInserted', function(e) {\r\n                    if(!domInsertCheck) {\r\n                        $('#floatBox').append(btnFloatingWrap);\r\n                        $('#floatBox').append(floatingWrap);\r\n        \r\n                        // preload 대응 현재 슬라이드가 고객지원일때는 숨김처리\r\n                        if ($('.swiper-slide-active').data().hash == 'support'){\r\n                            $(floatingWrap).hide();\r\n                            $(btnFloatingWrap).hide();\r\n                        }\r\n                        $('.back-to-top button').off('click').on('click', function (e) {\r\n                            e.preventDefault();\r\n                            $(window).trigger('floatingTop');\r\n                            $('html, body').stop().animate({\r\n                                scrollTop: 0\r\n                            }, 400);\r\n                        });\r\n            \r\n                        KRP0005.init();\r\n                        $(document).trigger('appInit');\r\n                        domInsertCheck = true;\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            // 스와이프 아닌 페이지\r\n            KRP0005.init();\r\n        }\r\n        \r\n        // BTOCSITE-27 :: 플로팅 바 swipe 대응\r\n        \r\n    });\r\n})();"]}