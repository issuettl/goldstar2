{"version":3,"file":"../app.common.min.js","sources":["app.common.js"],"sourcesContent":["var LGEAPPHostName = window.location.hostname;\r\nvar LGEcomfirmAPPInstall, LGEquickMenuPosCover, LGEquickMenuPosPush, LGEAPPcomfirmAPPOpen, LGEAPPalarmCount, receiptCodeDirectReturn, receiptCodeDirectInput;\r\nvar LGEAPPclickCNT = 0;\r\n\r\n/*\r\nIOS:        /ipod|iphone|ipad/.test(navigator.userAgent.toLowerCase()),\r\nIPHONE:     /iphone/.test(navigator.userAgent.toLowerCase()),\r\nIPAD:       /ipad/.test(navigator.userAgent.toLowerCase()),\r\nANDROID:    /android/.test(navigator.userAgent.toLowerCase()),\r\nWINDOWS:    /windows/.test(navigator.userAgent.toLowerCase()),\r\nMOBILE:     /mobile/.test(ua)\r\n*/\r\nvar appInit = function() {\r\n    var agent = navigator.userAgent;\r\n    //console.log('앱 스크립트 시작');\r\n\r\n    if (LGEAPPHostName != \"cmsdev50.lge.co.kr\" && LGEAPPHostName != \"cms50.lge.co.kr\") {\r\n        if (isApp() && window.innerWidth < 768) {\r\n            //console.log('앱 확인');\r\n            //헤더 앱 설정 버튼\r\n            $('.mapExclusive').addClass('active');\r\n            $('.mapExclusiveDss').hide();\r\n            $('.mypage-main-new .app-only').css('display','inline-block'); // LGECOMVIO-30 : 마이페이지 홈 1차 개선 - 앱전용 옵션(20220520)\r\n            $('.app-alarm-button').css('right','30px'); // 210621 앱 알림함 아이콘 추가 원복처리 \r\n            $(\".app-settings-button\").on({\r\n                click : function() {\r\n                    document.location.href=\"/mobile-app/option\";\r\n                }\r\n            });\r\n            //Quick메뉴, Easy-path 삭제\r\n            $('.subRenewMainWrap .KRP0005,.subRenewMainWrap .KRP0032,.subRenewMainWrap .quick-menu-list,.subRenewMainWrap .easy-path').remove();\r\n\r\n            //앱 개인정보 수정 링크 변경\r\n            $(\".mod-link\").each(function(){ \r\n               this.href = this.href.replace(\"changeInfo.do\", \"changeInfo_app.do\");\r\n            });\r\n\r\n\r\n            if ($(\".subRenewMainWrap .btn-app-ar\").length > 0){\r\n                return;\r\n            }\r\n\r\n            if ($(\".subRenewMainWrap\").length > 0) {\r\n                //console.log('AR 버튼 추가');\r\n                //Quick메뉴 AR 버튼 추가\r\n                $(\".subRenewMainWrap .floating-wrap\").prepend('<div class=\"floating-menu cs-cst btn-app-ar\"><div class=\"app-ar\"><button href=\"javascript:void(0);\"><span>AR</span><span class=\"app-ar-txt\"><i></i>제품을 가상으로 배치해보세요</span></button></div></div>');\r\n                $(\".subRenewMainWrap .btn-app-ar\").show();\r\n                var $arBtn = $(\".subRenewMainWrap .btn-app-ar button\");\r\n\r\n                function rafRun(cb) {\r\n                    var tick = false\r\n\r\n                    return function trigger() {\r\n                        if (tick) {\r\n                            return\r\n                        }\r\n\r\n                        tick = true\r\n                        return requestAnimationFrame(function task() {\r\n                            tick = false\r\n                            return cb()\r\n                        })\r\n                    }\r\n                }\r\n\r\n                function setArBtn() {\r\n                    // 플로팅 버튼 AR 관련\r\n                    if (vcui.detect.isMobileDevice) {\r\n                        rafRun(function () {\r\n                            $('.floating-menu.btn-app-ar').css('display', 'block');\r\n                            $('.floating-menu.top').hide();\r\n                            $('.floating-menu.top').addClass('call-yet');\r\n                            $(window).trigger('floatingTopHide');\r\n                        });\r\n                    }\r\n                }\r\n\r\n                setArBtn();\r\n\r\n                //Quick메뉴 AR 버튼 이벤트\r\n                $arBtn.off(\"click focusin focusout\").on({\r\n                    click : function() {\r\n                        $(this).addClass(\"active\");\r\n\r\n                        if(LGEAPPclickCNT > 0){\r\n                            if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {\r\n                                var obj = new Object();\r\n                                obj.command = \"showAR\";\r\n                                var jsonString= JSON.stringify(obj);\r\n                                webkit.messageHandlers.callbackHandler.postMessage(jsonString);\r\n                            } else {\r\n                                void android.openAR(null);\r\n                            }\r\n                        }\r\n                        LGEAPPclickCNT++;\r\n                    },\r\n                    focusin : function(){\r\n                        setTimeout(function(){\r\n                            $arBtn.addClass(\"active\");\r\n                            LGEAPPclickCNT = 1;\r\n                        }, 150);\r\n                    },\r\n                    focusout : function(){\r\n                        $arBtn.removeClass(\"active\");\r\n                        LGEAPPclickCNT = 0;\r\n                    }\r\n                });\r\n\r\n                //스크롤 시 AR 버튼 default 상태로 변경\r\n                $(window).on('scroll.floating', function () {\r\n                    var scrollTop = $(window).scrollTop();\r\n                    var hasTop = $('.floating-menu.top').hasClass('call-yet');\r\n\r\n                    if (scrollTop == 0) {\r\n                        if (hasTop) {\r\n                            $('.floating-menu.btn-app-ar').css('display', 'block');\r\n                            $(window).trigger('floatingTopHide');\r\n                        } else {\r\n                            //앱인데 메인이 아닐경우에만 실행\r\n                            $('.floating-menu.btn-app-ar').css('display', 'block');\r\n                            $(window).trigger('floatingTopHide');\r\n                            //임시 추가 끝\r\n                        }\r\n                    } else {\r\n                        if (scrollTop > 100 && $arBtn.hasClass('active')) {\r\n                            $arBtn.trigger('focusout');\r\n                        } else {\r\n                            if (hasTop) {\r\n                                $('.floating-menu.btn-app-ar').css('display', 'block');\r\n                                $(window).trigger('floatingTopShow');\r\n\r\n                            } else {\r\n                                $('.floating-menu.btn-app-ar').css('display', 'block');\r\n                                $(window).trigger('floatingTopShow');\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n\r\n\r\n            if($(\".subRenewMainWrap\").length > 0 || $(\".signature-main\").length > 0 || $(\".thinq-main\").length > 0) {\r\n                if(agent.indexOf(\"LGEAPP-in\") != -1) {\r\n                    //노치 있음\r\n                    $(\".subRenewMainWrap .floating-wrap\").addClass(\"app-LGEAPP-in\");\r\n                }else if(agent.indexOf(\"LGEAPP-io\") != -1) {\r\n                    //노치 없음\r\n                    $(\".subRenewMainWrap .floating-wrap\").addClass(\"app-LGEAPP-io\");\r\n                }else if(agent.indexOf(\"LGEAPP\") != -1) {\r\n                    //안드로이드\r\n                    $(\".subRenewMainWrap .floating-wrap\").addClass(\"app-LGEAPP\");\r\n                }\r\n\r\n                /*\r\n                덮는 경우 : app-chng-pos\r\n                미는 경우 : app-chng-push-pos\r\n                */\r\n                //하단 탭바 덮는 경우\r\n                LGEquickMenuPosCover = function(bool){\r\n                    if(bool == \"Y\"){\r\n                        $('.subRenewMainWrap .floating-wrap').removeClass('app-chng-push-pos').addClass('app-chng-pos');\r\n                    }else{\r\n                        $('.subRenewMainWrap .floating-wrap').removeClass('app-chng-push-pos').removeClass('app-chng-pos');\r\n                    }\r\n                }\r\n                //하단 탭바 미는 경우\r\n                LGEquickMenuPosPush = function(bool){\r\n                    $('.subRenewMainWrap .floating-wrap').removeClass('app-chng-pos').addClass('app-chng-push-pos');\r\n                }\r\n            }            \r\n\r\n            //알림함 Count 표시\r\n            /* 210621 알람아이콘 롤백처리 -> 추후 오픈 예정 */\r\n            if (/iPhone|iPad|iPod/i.test(agent)) {\r\n                var obj = new Object();\r\n                obj.command = \"getUncheckedPushCount\";\r\n                obj.callback =\"LGEAPPalarmCount\";\r\n                var jsonString= JSON.stringify(obj);\r\n                webkit.messageHandlers.callbackHandler.postMessage(jsonString);\r\n            }else if(/Android/i.test(agent) && android.hasOwnProperty('getUncheckedPushCount')) {\r\n                android.getUncheckedPushCount(\"LGEAPPalarmCount\");\r\n            }else{\r\n                //console.log(\"Count Update\");\r\n            }\r\n\r\n            //알림함 버튼 이벤트  \r\n            $(\".app-alarm-button\").on({\r\n                click : function(){\r\n                    if (/iPhone|iPad|iPod/i.test(agent)) {\r\n                        var obj = new Object();\r\n                        obj.command = \"openPushBox\";\r\n                        var jsonString= JSON.stringify(obj);\r\n                        webkit.messageHandlers.callbackHandler.postMessage(jsonString);\r\n                    }else if(/Android/i.test(agent)) {\r\n                        android.openPushBox();\r\n                    }else{\r\n                        //console.log(\"not iPhone/Android\");\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        // s : BTOCSITE-12307\r\n        receiptCodeDirectReturn = function(barcode) {\r\n            if (barcode != null && barcode != \"\" && barcode != undefined) {\r\n                var setBarcode = barcode.split('/').join('');\r\n                if(chkSerialNum(setBarcode)) {\r\n                    var getBarcode = ($('#categorySelect').val() == 'EMRT') ? setBarcode.slice(0,16):setBarcode.slice(0,22);\r\n                    $('#receiptCodeInputWrap').find('.err-block').hide().find('.err-msg').text(\"\")\r\n                    $(\"#inputReceipt\").val(getBarcode);\r\n                    $('#receiptCodeInputWrap').show();\r\n                    $('#inquiryButton').focus();\r\n                } else {\r\n                    $('#receiptCodeInputWrap').find('.err-block').show().find('.err-msg').text(\"바코드 형식이 잘못되었습니다.\")\r\n                    $('#receiptCodeInputWrap').show();\r\n                }\r\n            }\r\n        }\r\n\r\n        receiptCodeDirectInput = function() {\r\n            $('#receiptCodeInputWrap').show();\r\n            $('#inputReceipt').val('').focus();\r\n        }\r\n        // e : BTOCSITE-12307\r\n\r\n        function chkSerialNum(barcode) {\r\n\r\n            var minLengthFlag = barcode.length >= 10 ? true: false;\r\n                \r\n            var currentVal = [];\r\n            var checkSerialSuccess = [];\r\n            var regexArry = [/^[0-9]+$/, /^[a-zA-Z0-9]+$/, /^[0-9]+$/];\r\n\r\n            currentVal[0] = barcode.slice(0,3);\r\n            currentVal[1] = barcode.slice(3,14);\r\n            currentVal[2] = barcode.slice(14,18);\r\n\r\n            currentVal.forEach(function(v, i){\r\n                if( v != \"\" ) {\r\n                    checkSerialSuccess.push(regexArry[i].test(v))\r\n                }\r\n            })\r\n\r\n            return (minLengthFlag && checkSerialSuccess.indexOf(false) == -1) ? true : false;\r\n        }\r\n        //BTOCSITE-4086 210928 - E\r\n        \r\n        //iOS, Android 앱 설치 여부 확인\r\n        LGEcomfirmAPPInstall = function() {\r\n            goAppUrl();   // BTOCSITE-5938-237 앱실행 방법 변경\r\n        }\r\n\r\n        //알림함 Count 표시\r\n        // 210701 알람체크 N뱃지 아이콘\r\n        LGEAPPalarmCount = function(cnt){\r\n            // 숫자 아닌경우 타입 예외 처리 2021-07-14\r\n            var count = cnt || 0;\r\n\r\n            if(typeof cnt !== 'number') {\r\n                count = /^\\d+$/.test(cnt) ? Number(cnt) : 0;\r\n            }\r\n            \r\n            var $target = $(\".app-alarm-button .app-alarm-count\");\r\n\r\n            if($target.length > 0){\r\n                $target.removeClass(\"active\");\r\n                \r\n                if(count > 0){\r\n                    $target.addClass(\"active\");\r\n                }\r\n\r\n                $target.html(count > 99 ? '99+' : count);\r\n            }\r\n\r\n            // 210701 알람체크 N뱃지 아이콘\r\n            var $mobNavBtn = $(\".mobile-nav-button\");\r\n            if(count > 0 && !$mobNavBtn.find('.count').length) $mobNavBtn.append(\"<span class='count'><span class='blind'>알림메시지 카운트 존재시</span>N<span>\");\r\n            else  $mobNavBtn.find('.count').remove();\r\n        }\r\n    }\r\n};\r\n\r\n\r\nfunction ChatbotAppClose(type) {\r\n    // 앱에서 호출될경우\r\n    if(isApp()) {\r\n        if(vcui.detect.isIOS){ \r\n           var jsonString = JSON.stringify({'command':'closeInAppBrowser'});\r\n           webkit.messageHandlers.callbackHandler.postMessage(jsonString);\r\n        }else{\r\n            android.closeNewWebview(); \r\n        }\r\n    } else {\r\n        if(type == 'native') {\r\n            history.back();\r\n        } else {\r\n            //웹에서 호출될경우\r\n            historyBack();\r\n        }\r\n    }\r\n}\r\n// 스와이프 적용일때 분기 처리\r\n$(document).ready(function(){\r\n    var isSwipe = !!$('#sw_con').length;\r\n    if ( isSwipe && isApp() ){\r\n        $(document).one('appInit', appInit);\r\n    } else {\r\n        appInit();\r\n    }\r\n});"],"names":["LGEcomfirmAPPInstall","LGEquickMenuPosCover","LGEquickMenuPosPush","LGEAPPcomfirmAPPOpen","LGEAPPalarmCount","receiptCodeDirectReturn","receiptCodeDirectInput","LGEAPPHostName","window","location","hostname","LGEAPPclickCNT","appInit","$arBtn","obj","jsonString","agent","navigator","userAgent","isApp","innerWidth","$","addClass","hide","css","on","click","document","href","remove","each","this","replace","length","prepend","show","vcui","detect","isMobileDevice","off","test","Object","command","JSON","stringify","webkit","messageHandlers","callbackHandler","postMessage","android","openAR","focusin","setTimeout","focusout","removeClass","scrollTop","hasClass","trigger","indexOf","bool","callback","hasOwnProperty","getUncheckedPushCount","openPushBox","barcode","setBarcode","getBarcode","minLengthFlag","currentVal","checkSerialSuccess","regexArry","undefined","split","join","slice","forEach","v","i","push","val","find","text","focus","goAppUrl","cnt","count","Number","$target","html","$mobNavBtn","append","ChatbotAppClose","type","isIOS","closeNewWebview","history","back","historyBack","ready","one"],"mappings":"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"}